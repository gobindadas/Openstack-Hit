{"heat_template_version": "2015-04-30", "description": "Create new network and add 2 subnet to the network,2 security groups,2 vms in each subnet with floatingIP,attach volume to wach vm", "resources": {"demo_subnet": {"type": "OS::Neutron::Subnet", "properties": {"network_id": {"get_resource": "demo_net"}, "tenant_id": "f5ea74b26ec848d68e7a02fdab9ca39f", "allocation_pools": [{"start": "192.168.104.12", "end": "192.168.104.30"}], "gateway_ip": "192.168.104.1", "cidr": "192.168.104.0/24"}}, "volume_attachment": {"type": "OS::Cinder::VolumeAttachment", "properties": {"instance_uuid": {"get_resource": "server2"}, "mountpoint": "/dev/sdb", "volume_id": {"get_resource": "cinder_volume"}}}, "server1_port": {"type": "OS::Neutron::Port", "properties": {"network_id": {"get_resource": "demo_net"}, "fixed_ips": [{"subnet_id": {"get_resource": "demo_subnet"}}]}}, "server2_floating_ip": {"type": "OS::Neutron::FloatingIP", "properties": {"floating_network": "provider", "port_id": {"get_resource": "server2_port"}}}, "demo_router": {"type": "OS::Neutron::Router", "properties": {"external_gateway_info": {"network": "provider"}}}, "server1": {"type": "OS::Nova::Server", "properties": {"name": "vm1", "availability_zone": "nova", "key_name": {"get_resource": "demo_key"}, "image": "cirros", "flavor": "m1.tiny", "networks": [{"network": {"get_resource": "demo_net"}, "port": {"get_resource": "server1_port"}}]}}, "server2": {"type": "OS::Nova::Server", "properties": {"name": "vm2", "availability_zone": "nova", "key_name": {"get_resource": "demo_key"}, "image": "cirros", "flavor": "m1.tiny", "networks": [{"network": {"get_resource": "demo_net"}, "port": {"get_resource": "server2_port"}}]}}, "router_interface": {"type": "OS::Neutron::RouterInterface", "properties": {"router_id": {"get_resource": "demo_router"}, "subnet_id": {"get_resource": "demo_subnet"}}}, "server2_port": {"type": "OS::Neutron::Port", "properties": {"network_id": {"get_resource": "demo_net"}, "fixed_ips": [{"subnet_id": {"get_resource": "demo_subnet"}}]}}, "demo_key": {"type": "OS::Nova::KeyPair", "properties": {"name": "gobinda-test"}}, "demo_net": {"type": "OS::Neutron::Net", "properties": {"tenant_id": "f5ea74b26ec848d68e7a02fdab9ca39f", "name": "ericsson-net"}}, "server1_floating_ip": {"type": "OS::Neutron::FloatingIP", "properties": {"floating_network": "provider", "port_id": {"get_resource": "server1_port"}}}, "cinder_volume": {"type": "OS::Cinder::Volume", "properties": {"availability_zone": "nova", "size": 1}}}}